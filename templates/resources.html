{% extends "nav.html" %} {% block title %}Resources{% endblock %} {% block
content %}
<!-- Header Section -->
<div class="w-full bg-white text-black text-left border-b-2 border-gray-300">
    <h1 class="text-2xl font-bold inline-block">Resources</h1>
</div>
<!-- End of Header Section -->
<style>
    .section {
        margin-bottom: 10px;
        padding: 15px;
        border-radius: 8px;
        background-color: #e5e7eb;
        border: 1px solid #cbd5e1;
    }

    .section h1 {
        color: #1f2937;
        font-weight: bold;
        font-size: 1.5em;
        margin-bottom: 10px;
    }

    .filters-legend {
        display: flex;
        align-items: center;
        justify-content: flex-start;
        gap: 20px;
        margin-bottom: 10px;
    }

    .filters {
        display: flex;
        flex-direction: row;
        gap: 5px;
        position: relative;
    }

    .filters label {
        font-weight: bold;
        font-size: 0.8em;
        margin-top: 5px;
    }

    .filters select,
    .filters input {
        padding: 5px;
        border: 1px solid #94a3b8;
        background-color: #ffffff;
        font-size: 0.8em;
        width: 200px;
        box-sizing: border-box;
    }

    table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        margin-top: 10px;
        background-color: #ffffff;
        border: 1px solid #cbd5e1;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        text-align: center;
    }

    th,
    td {
        padding: 12px 15px;
        text-align: left;
        border-bottom: 1px solid #cbd5e1;
    }

    th {
        background-color: #fed7aa;
        color: #1f2937;
        text-align: left;
    }

    td {
        color: #666;
    }

    #noData {
        font-style: italic;
        color: #999;
        text-align: center;
    }

    .pagination {
        display: flex;
        justify-content: center;
        margin-top: 20px;
        gap: 10px;
    }

    .pagination button {
        padding: 5px 10px;
        border: 1px solid #cbd5e1;
        background-color: #fed7aa;
        font-weight: bold;
        border-radius: 4px;
        cursor: pointer;
    }

    .pagination button.disabled {
        background-color: #f1f5f9;
        cursor: not-allowed;
    }

    .pagination span {
        padding: 5px 10px;
        border: 1px solid #cbd5e1;
        background-color: #e2e8f0;
        border-radius: 4px;
        cursor: pointer;
    }

    .pagination span.current {
        background-color: #fed7aa;
        font-weight: bold;
    }

    .warning {
        color: red;
        font-size: 0.9em;
        margin-left: 10px;
        position: absolute;
        bottom: -20px;
    }
    #resetBtn {
        background-color: #f0f0f0;
        color: #333;
        border: 1px solid #ccc;
        padding: 8px 16px;
        cursor: pointer;
        font-size: 14px;
        transition:
            background-color 0.3s,
            color 0.3s,
            border-color 0.3s;
        border-radius: 4px;
        display: inline-flex;
        align-items: center;
        margin-left: 10px;
        font-weight: bold;
    }

    #resetBtn:hover {
        background-color: #fed7aa;
        font-weight: bold;
        border-color: #999;
    }

    #resetBtn:focus {
        outline: none;
    }

    #resetBtn:active {
        background-color: #ccc;
    }
</style>

<div class="flex flex-col gap-4 p-2">
    <div class="flex gap-4">
        <!-- Section 1 -->
        <div class="section_1 w-3/4 overflow-y-auto">
            <div class="bg-gray-200 p-1 rounded-lg">
                <h3 class="text-lg font-bold text-black-400">
                    Resource Training & Development
                </h3>
            </div>
            <div class="border border-solid border-slate-400 p-1">
                The Quality Engineering resources are constantly trained in the
                latest trends and technologies for delivering best-in-class
                testing services across client projects.
                <ul>
                    <li>
                        1. The practice is highly oriented towards training
                        testers from basic to full stack.
                    </li>
                    <li>
                        2. Interested individuals are given priority in
                        skill-based training as per project demands.
                    </li>
                </ul>
            </div>
        </div>

        <!-- Section 2 -->
        <div class="section_2 w-1/4 overflow-y-auto">
            <div class="bg-gray-200 p-1 rounded-lg">
                <h3 class="text-lg font-bold text-black-400 text-center">
                    Training Updates
                </h3>
            </div>
            <div class="border border-solid border-slate-400 p-1">
                <p>
                    Upcoming Trainings on Tosca starting Batch 1 from Apr 2024
                </p>
            </div>
        </div>
    </div>

    <section class="section" id="dropdown">
        <div class="filters-legend">
            <div class="filters">
                <label for="skill" class="required">Skill</label>
                <select id="skill" class="p-2 border border-gray-300 rounded">
                    <option value="all" selected>All</option>
                    <option value="webTesting">Web Testing</option>
                    <option value="dataTesting">Data/ETL Testing</option>
                    <option value="performanceTesting">
                        Performance Testing
                    </option>
                </select>
                <span id="skillWarning" class="warning" style="display: none"
                    >Please select a skill.</span
                >
            </div>
            <div class="filters">
                <label for="expertise" class="required">Expertise</label>
                <select
                    id="expertise"
                    class="p-2 border border-gray-300 rounded"
                    disabled
                >
                    <option value="all" selected>All</option>
                    <option value="None">None</option>
                    <option value="Interested">Interested</option>
                    <option value="Beginner">Beginner</option>
                    <option value="Intermediate/Advanced">
                        Intermediate/Advanced
                    </option>
                </select>
                <span
                    id="expertiseWarning"
                    class="warning"
                    style="display: none"
                    >Please select a skill first.</span
                >
            </div>
            <div class="filters">
                <label for="baseLocation" class="required">Base Location</label>
                <select
                    id="baseLocation"
                    class="p-2 border border-gray-300 rounded"
                >
                    <option value="all" selected>All</option>
                    <option value="Chennai">Chennai</option>
                    <option value="Hyderabad">Hyderabad</option>
                    <option value="Bengaluru">Bengaluru</option>
                </select>
            </div>
            <!-- Reset Button -->
            <button
                id="resetBtn"
                class="p-2 border border-gray-300 rounded bg-gray-200"
            >
                Reset Filters
            </button>
        </div>
        <!-- Employee List Table -->
        <table id="employeeList">
            <thead>
                <tr>
                    <th>Resources</th>
                    <th>Skill</th>
                    <th>Expertise Level</th>
                    <th>Base Location</th>
                </tr>
            </thead>
            <tbody>
                <tr id="noData">
                    <td colspan="4">
                        No data available for the selected filter combination
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="pagination" id="pagination">
            <button id="prevPage" class="disabled">Prev</button>
            <span id="pageNumbers"></span>
            <button id="nextPage" class="disabled">Next</button>
        </div>
    </section>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const employees = [
            {
                name: "Aarti Kyama",
                webTesting: "Intermediate/Advanced",
                dataTesting: "Intermediate/Advanced",
                performanceTesting: "Beginner",
                baseLocation: "Chennai",
            },
            {
                name: "Abhishek Gupta",
                webTesting: "None",
                dataTesting: "None",
                performanceTesting: "Intermediate/Advanced",
                baseLocation: "Hyderabad",
            },
            {
                name: "Ajit Singh",
                webTesting: "None",
                dataTesting: "None",
                performanceTesting: "None",
                baseLocation: "Bengaluru",
            },
            {
                name: "Akash Gupta",
                webTesting: "Intermediate/Advanced",
                dataTesting: "Beginner",
                performanceTesting: "Beginner",
                baseLocation: "Chennai",
            },
            {
                name: "Akib Basheer",
                webTesting: "Intermediate/Advanced",
                dataTesting: "Beginner",
                performanceTesting: "Interested",
                baseLocation: "Hyderabad",
            },
            {
                name: "Amar Namdev Memane",
                webTesting: "Intermediate/Advanced",
                dataTesting: "Intermediate/Advanced",
                performanceTesting: "Intermediate/Advanced",
                baseLocation: "Bengaluru",
            },
            {
                name: "Aniket Baban Turankar",
                webTesting: "Intermediate/Advanced",
                dataTesting: "Intermediate/Advanced",
                performanceTesting: "None",
                baseLocation: "Chennai",
            },
            {
                name: "Anitha Paramasivan",
                webTesting: "Beginner",
                dataTesting: "Intermediate/Advanced",
                performanceTesting: "Interested",
                baseLocation: "Hyderabad",
            },
            {
                name: "Anupama Vaibhav Shinde",
                webTesting: "Intermediate/Advanced",
                dataTesting: "Intermediate/Advanced",
                performanceTesting: "Beginner",
                baseLocation: "Bengaluru",
            },
            {
                name: "Arnavi Amol Patil",
                webTesting: "Interested",
                dataTesting: "Intermediate/Advanced",
                performanceTesting: "Interested",
                baseLocation: "Chennai",
            },
            {
                name: "Arputha Aswin Chandra Sekar",
                webTesting: "Intermediate/Advanced",
                dataTesting: "Intermediate/Advanced",
                performanceTesting: "None",
                baseLocation: "Hyderabad",
            },
            {
                name: "Arul Sekar",
                webTesting: "Intermediate/Advanced",
                dataTesting: "Intermediate/Advanced",
                performanceTesting: "None",
                baseLocation: "Bengaluru",
            },
            {
                name: "Bhagya Sree Kota",
                webTesting: "Beginner",
                dataTesting: "Intermediate/Advanced",
                performanceTesting: "None",
                baseLocation: "Chennai",
            },
            {
                name: "Charan Kumar Thanugonda",
                webTesting: "Intermediate/Advanced",
                dataTesting: "Intermediate/Advanced",
                performanceTesting: "Intermediate/Advanced",
                baseLocation: "Hyderabad",
            },
            {
                name: "Dinakara Pandian Palanisamy",
                webTesting: "Intermediate/Advanced",
                dataTesting: "Intermediate/Advanced",
                performanceTesting: "None",
                baseLocation: "Bengaluru",
            },
            {
                name: "Ezhilarasi Rajendran",
                webTesting: "Intermediate/Advanced",
                dataTesting: "Intermediate/Advanced",
                performanceTesting: "None",
                baseLocation: "Chennai",
            },
            {
                name: "Jagadeesh Kumar Chippada",
                webTesting: "None",
                dataTesting: "Intermediate/Advanced",
                performanceTesting: "None",
                baseLocation: "Hyderabad",
            },
            {
                name: "Jeena Jacob",
                webTesting: "Intermediate/Advanced",
                dataTesting: "None",
                performanceTesting: "None",
                baseLocation: "Bengaluru",
            },
            {
                name: "Jeevitha Venkatesan",
                webTesting: "Intermediate/Advanced",
                dataTesting: "None",
                performanceTesting: "Intermediate/Advanced",
                baseLocation: "Chennai",
            },
            {
                name: "Jenifer Baby CelusArulraj",
                webTesting: "None",
                dataTesting: "Intermediate/Advanced",
                performanceTesting: "None",
                baseLocation: "Hyderabad",
            },
        ];

        const itemsPerPage = 5;
        let currentPage = 1;
        let filteredEmployees = employees;

        const skillSelect = document.getElementById("skill");
        const expertiseSelect = document.getElementById("expertise");
        const baseLocationSelect = document.getElementById("baseLocation");
        const employeeList = document
            .getElementById("employeeList")
            .querySelector("tbody");
        const pagination = document.getElementById("pagination");
        const prevPageBtn = document.getElementById("prevPage");
        const nextPageBtn = document.getElementById("nextPage");
        const pageNumbers = document.getElementById("pageNumbers");
        const resetBtn = document.getElementById("resetBtn");

        function enableExpertiseDropdown() {
            expertiseSelect.disabled = skillSelect.value === "all";
        }

        function showWarning(warningId, show) {
            document.getElementById(warningId).style.display = show
                ? "block"
                : "none";
        }

        function filterEmployees() {
            const skill = skillSelect.value;
            const expertise = expertiseSelect.value;
            const baseLocation = baseLocationSelect.value;

            filteredEmployees = employees.filter((employee) => {
                const skillMatch =
                    skill === "all" || employee[skill] !== "undefined";
                const expertiseMatch =
                    expertise === "all" || employee[skill] === expertise;
                const locationMatch =
                    baseLocation === "all" ||
                    employee.baseLocation === baseLocation;
                return skillMatch && expertiseMatch && locationMatch;
            });

            currentPage = 1;
            renderTable();
            renderPagination();
        }

        function renderTable() {
            employeeList.innerHTML = "";
            const start = (currentPage - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const pageEmployees = filteredEmployees.slice(start, end);

            if (pageEmployees.length === 0) {
                employeeList.innerHTML =
                    '<tr id="noData"><td colspan="4">No data available for the selected filter combination</td></tr>';
                pagination.style.display = "none";
            } else {
                pageEmployees.forEach((employee) => {
                    const tr = document.createElement("tr");
                    tr.innerHTML = `<td>${employee.name}</td><td>${skillSelect.value === "all" ? "Multiple" : skillSelect.options[skillSelect.selectedIndex].text}</td><td>${expertiseSelect.value === "all" ? "Multiple" : employee[skillSelect.value]}</td><td>${employee.baseLocation}</td>`;
                    employeeList.appendChild(tr);
                });
                pagination.style.display = "flex";
            }
        }

        function renderPagination() {
            pageNumbers.innerHTML = "";
            const totalPages = Math.ceil(
                filteredEmployees.length / itemsPerPage,
            );

            for (let i = 1; i <= totalPages; i++) {
                const span = document.createElement("span");
                span.innerText = i;
                span.className = i === currentPage ? "current" : "";
                span.addEventListener("click", () => {
                    currentPage = i;
                    renderTable();
                    renderPagination();
                });
                pageNumbers.appendChild(span);
            }

            prevPageBtn.classList.toggle("disabled", currentPage === 1);
            nextPageBtn.classList.toggle(
                "disabled",
                currentPage === totalPages,
            );
        }

        skillSelect.addEventListener("change", () => {
            enableExpertiseDropdown();
            showWarning(
                "skillWarning",
                skillSelect.value === "all" && expertiseSelect.value !== "all",
            );
            showWarning(
                "expertiseWarning",
                skillSelect.value === "all" && expertiseSelect.value !== "all",
            );
            filterEmployees();
        });

        expertiseSelect.addEventListener("change", () => {
            showWarning(
                "skillWarning",
                skillSelect.value === "all" && expertiseSelect.value !== "all",
            );
            showWarning(
                "expertiseWarning",
                skillSelect.value === "all" && expertiseSelect.value !== "all",
            );
            filterEmployees();
        });

        baseLocationSelect.addEventListener("change", filterEmployees);

        prevPageBtn.addEventListener("click", () => {
            if (currentPage > 1) {
                currentPage--;
                renderTable();
                renderPagination();
            }
        });

        nextPageBtn.addEventListener("click", () => {
            const totalPages = Math.ceil(
                filteredEmployees.length / itemsPerPage,
            );
            if (currentPage < totalPages) {
                currentPage++;
                renderTable();
                renderPagination();
            }
        });

        resetBtn.addEventListener("click", () => {
            skillSelect.value = "all";
            expertiseSelect.value = "all";
            baseLocationSelect.value = "all";

            enableExpertiseDropdown();
            filterEmployees();
        });

        enableExpertiseDropdown();
        renderTable();
        renderPagination();
    });
</script>
{% endblock %}
