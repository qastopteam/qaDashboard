{% extends "nav.html" %} {% block title %}Projects{% endblock %} {% block
content %}
<!-- Header Section -->
<div class="w-full bg-white text-black text-left border-b-2 border-gray-300">
    <h1 class="text-2xl font-bold inline-block">DataEntry</h1>
</div>
<!-- End of Header Section -->
<style>
    td {
        min-width: 20px;
    }
    #part1 #mand_fields {
        color: graytext;
        font-style: italic;
    }
    #part1 span {
        color: red;
    }
    #col_label {
        width: 205px;
        max-width: 205px;
        min-width: 205px;
    }
    select {
        width: 270px;
        border: 1px solid #ccc;
        text-align: left;
    }
    textarea {
        width: 270px;
        border: 1px solid #ccc;
    }
    input {
        width: 270px;
        border: 1px solid #ccc;
    }
    input[type="text"]::placeholder {
        /* Firefox, Chrome, Opera */
        text-align: center;
        font-style: italic;
    }

    textarea::placeholder {
        /* Firefox, Chrome, Opera */
        text-align: center;
        font-style: italic;
    }
    #StartDate,
    #EndDate {
        width: 122.5px;
        border: 1px solid #ccc;
        text-align: center;
    }
    h5 {
        background-color: #fed7aa;
        color: #1f2937;
        padding: 5px;
        border-radius: 5px;
        margin-top: 20px;
        margin-bottom: 10px;
        font-size: 18px;
        font-weight: bold;
    }
    #part1 {
        margin-top: 10px;
        margin-bottom: 10px;
        margin-right: 10px;
        font-weight: 490;
    }
    #part2 {
        margin-top: 10px;
        margin-bottom: 10px;
        margin-left: 10px;
        font-weight: 490;
    }
    #AppliedFilters,
    #EntryForm,
    #ApplyFilters,
    #ChoosedTracker {
        padding-left: 10px;
    }
    #AppliedFilters {
        padding-bottom: 10px;
        margin-bottom: 10px;
        border-bottom: 1px solid whitesmoke;
    }
    #Submit_Button {
        color: white;
        background-color: #c2410c;
        width: 100px;
        margin-top: 10px;
        margin-left: 10px;
        padding: 10px;
        border-radius: 5px;
        border: none;
    }
    #alert {
        color: red;
    }
    #rag_alert,
    #leave_type_alert,
    #expertise_level_alert,
    #weekly_deliverables_alert,
    #test_type_alert,
    #areas_to_improve_alert,
    #request_description_alert,
    #request_type_alert,
    #qe_delivery_lead_alert,
    #client_name_alert,
    #requestor_name_alert {
        color: red;
        width: 200px;
        font-size: 10px;
    }
    #popup {
        visibility: hidden;
        position: relative;
        display: inline-block;
        cursor: pointer;
        z-index: 1;
        left: -350px;
        color: black;
        font-size: 20px;
        font-weight: 500;
        background-color: green;
        border-radius: 5px;
        width: 700px;
        height: 100px;
        text-align: center;
        padding-top: 30px;
    }
    #popup .custom-background {
        visibility: visible;
        background-color: #fed7aa;
        border-radius: 5px;
        width: 700px;
        height: 100px;
        text-align: center;
        padding: 30px;
    }
    .rate {
        float: left;
        height: 46px;
        padding: 0 10px;
    }
    .rate:not(:checked) > input {
        position: absolute;
        top: -9999px;
    }
    .rate:not(:checked) > label {
        float: right;
        width: 1em;
        overflow: hidden;
        white-space: nowrap;
        cursor: pointer;
        font-size: 30px;
        color: #ccc;
    }
    .rate:not(:checked) > label:before {
        content: "★ ";
    }
    .rate > input:checked ~ label {
        color: #ffc700;
    }
    .rate:not(:checked) > label:hover,
    .rate:not(:checked) > label:hover ~ label {
        color: #deb217;
    }
    .rate > input:checked + label:hover,
    .rate > input:checked + label:hover ~ label,
    .rate > input:checked ~ label:hover,
    .rate > input:checked ~ label:hover ~ label,
    .rate > label:hover ~ input:checked ~ label {
        color: #c59b08;
    }
    .rate1 {
        float: left;
        height: 46px;
        padding: 0 10px;
    }
    .rate1:not(:checked) > input {
        position: absolute;
        top: -9999px;
    }
    .rate1:not(:checked) > label {
        float: right;
        width: 1em;
        overflow: hidden;
        white-space: nowrap;
        cursor: pointer;
        font-size: 30px;
        color: #ccc;
    }
    .rate1:not(:checked) > label:before {
        content: "★ ";
    }
    .rate1 > input:checked ~ label {
        color: #ffc700;
    }
    .rate1:not(:checked) > label:hover,
    .rate1:not(:checked) > label:hover ~ label {
        color: #deb217;
    }
    .rate1 > input:checked + label:hover,
    .rate1 > input:checked + label:hover ~ label,
    .rate1 > input:checked ~ label:hover,
    .rate1 > input:checked ~ label:hover ~ label,
    .rate1 > label:hover ~ input:checked ~ label {
        color: #c59b08;
    }
</style>
<div id="part1" style="width: 48%; float: left; display: inline">
    <div>
        <div>
            <h5>Input Form</h5>
        </div>
        <div id="AppliedFilters"></div>
    </div>
    <div>
        <div id="EntryForm"></div>
        <button id="Submit_Button" onclick="sendInput()">Submit</button>
        <label id="alert"></label>
    </div>
</div>
<div id="part2" style="width: 48%; float: left; display: inline">
    <div>
        <div>
            <h5>Choose Tracker:</h5>
        </div>
        <div id="ChoosedTracker">
            <select
                onchange="getChooseTracker()"
                name="ChooseTracker"
                id="ChooseTracker"
            >
                {% for tracker in trackers %}
                <option value="{{tracker}}">{{tracker}}</option>
                {% endfor %}
            </select>
        </div>
    </div>
    <div>
        <div>
            <h5>Apply Filters</h5>
        </div>
        <div id="ApplyFilters"></div>
    </div>
    <div id="popup">
        <span class="popuptext" id="myPopup"></span>
    </div>
</div>

<script type="text/javascript">
    const date = new Date();
    const formatter = new Intl.DateTimeFormat('zh-CN', { day: '2-digit', month: '2-digit', year: 'numeric' });
    const formattedDate = formatter.format(date).replaceAll("/","-");
    const employees={{ employees|tojson }}
    const leads={{leads|tojson}}
            function getPracticeLead() {
                selectElement =document.getElementById("PracticeLead");
                lead_name =
                    selectElement.options
                    [selectElement.selectedIndex].textContent;
                //lead_name = document.getElementById("PracticeLead").value
                document.querySelector('.practice_lead').textContent = lead_name;
                emps= ['-- Select --'];
                for (emp of employees){
                if (emp.lead==lead_name){
                emps.push(emp.name);
                }
                }
                document.getElementById("ResourceName").innerHTML=emps.map((employee) => `
                        <option  value=${employee}>${employee}</option>
                    `,
                                )
                                .join("");
            }
            function getResourceName() {
                selectElement =document.getElementById("PracticeLead");
                lead_name =selectElement.options[selectElement.selectedIndex].textContent;
                selectElement =document.getElementById("ResourceName");
                resource_name =selectElement.options[selectElement.selectedIndex].textContent;
                projects= ['-- Select --'];
                for (emp of employees){
                if (emp.lead==lead_name){
                    if(emp.name==resource_name){
                        projects.push(emp.project);
                    }
                }
                }
                console.log(projects);
                document.querySelector('.resource_name').textContent = resource_name;
                document.getElementById("ProjectName").innerHTML=projects.map((project) => `
                    <option  value=${project}>${project}</option>
                `,
                            )
                            .join("");
            }
            function getProjectName() {
                selectElement =document.getElementById("ProjectName");
                output =
                    selectElement.options
                    [selectElement.selectedIndex].textContent;
                document.querySelector('.project_name').textContent = output;
            }
            function getDynamicFilter3() {
                output = document.getElementById("DynamicFilter3").value
                document.querySelector('.dynamic_filter_3').textContent = output;
            }
            function getDynamicFilter4() {
                selectElement =document.getElementById("DynamicFilter4");
                skill =
                    selectElement.options
                    [selectElement.selectedIndex].textContent;
                if(skill=="Other"){
                document.getElementById("skl").innerHTML =`<input onchange="getDynamicFilter4()" type="text" id="DynamicFilter4" name="DynamicFilter4"  placeholder="Enter Skill">`;
                }
    /*            else{
                tbl=`<select onchange="getDynamicFilter4()" name="DynamicFilter4" id="DynamicFilter4">
                            {% for skill in skills %}
                            <option  value={{skill}}>{{skill}}</option>
                            {% endfor %}
                          </select>`;
                document.getElementById("skl").innerHTML =tbl;
                }*/
                document.querySelector('.dynamic_filter_4').textContent = skill;
            }
            function getRAGStatus() {
                output = document.getElementById("RAGStatus").value
                //document.querySelector('.rag_status').textContent = output;
                document.getElementById('rag_alert').textContent = "";
            }
            function getTestingType() {
                output = document.getElementById("TestingType").value
                //document.querySelector('.testing_type').textContent = output;
                document.getElementById('test_type_alert').textContent = "";
            }
            function getWeeklyDeliverable() {
                output = document.getElementById("WeeklyDeliverable").value
                //document.querySelector('.testing_type').textContent = output;
                console.log("OPT",output);
                if(output==""){
                document.getElementById('weekly_deliverables_alert').textContent = "*Please Enter Weekly Deliverables";
                }
                else{
                document.getElementById('weekly_deliverables_alert').textContent = "";
                }
            }
            function getExpertiseLevel() {
                output = document.getElementById("ExpertiseLevel").value
                //document.querySelector('.expertise_level').textContent = output;
                document.getElementById('expertise_level_alert').textContent = "";
            }
            function getIntUpSkill() {
                output = document.getElementById("IntUpSkill").value
                //document.querySelector('.int_up_skill').textContent = output;
            }
            function displayRadioValue() {
                var ele = document.getElementsByName('rate1');
                for (i = 0; i < ele.length; i++) {
                    if (ele[i].checked)
                        console.log(ele[i].value);
                }
            }
            function getAreaofSupport() {
                output = document.getElementById("AreaofSupport").value
                aos = document.getElementById("AreaofSupport").value
                if(aos=="Request"){
                tbl1=`
                <table>
                <tbody>
                <tr>
                    <td id="col_label">Requestor Name<span>*</span><td>:</td></td>
                    <td>
                        <input onchange="getRequestorName()" type="text" id="RequestorName" name="RequestorName" placeholder="Enter Requestor Name">
                    </td>
                </tr>
                <tr><td id="requestor_name_alert"></td></tr>
                <tr>
                    <td id="col_label">Client Name<span>*</span><td>:</td></td>
                    <td id="clnt" >
                        <select onchange="getClientName()" name="ClientName" id="ClientName">
                        {% for client_name in client_names %}
                        <option  value={{client_name}}>{{client_name}}</option>
                        {% endfor %}
                        </select>
                    </td>
                </tr>
                <tr><td id="client_name_alert"></td></tr>
                <tr>
                    <td id="col_label">QE Delivery Lead<span>*</span><td>:</td></td>
                    <td>
                        <select onchange="getQEDeliveryLead()" name="QEDeliveryLead" id="QEDeliveryLead">
                        {% for lead in leads %}
                        <option  value={{lead}}>{{lead}}</option>
                        {% endfor %}
                        </select>
                    </td>
                </tr>
                <tr><td id="qe_delivery_lead_alert"></td></tr>
                <tr>
                    <td id="col_label">Choose Request Type<span>*</span><td>:</td></td>
                    <td>
                        <select onchange="getChooseRequestType()" name="ChooseRequestType" id="ChooseRequestType">
                        {% for request_type in request_types %}
                        <option  value={{request_type}}>{{request_type}}</option>
                        {% endfor %}
                        </select>
                    </td>
                </tr>
                <tr><td id="request_type_alert"></td></tr>
                <tr>
                    <td id="col_label">Request Description<span>*</span><td>:</td></td>
                    <td><textarea id="RequestDescription" onchange="getRequestDescription()" placeholder="Enter Request Description"></textarea></td>
                </tr>
                <tr><td id="request_description_alert"></td></tr>
                </tbody>
            </table>
                `;
                document.getElementById("EntryForm").innerHTML =tbl1;
                }
                else{
                tbl1=`
                <table>
                <tbody>
                <tr>
                    <td id="col_label">Areas to Improve<span>*</span><td>:</td></td>
                    <td><textarea id="AreastoImprove" onchange="getAreastoImprove()" placeholder="Enter Areas to Improve"></textarea></td>
                </tr>
                <tr><td id="areas_to_improve_alert"></td></tr>
                <tr>
                    <td id="col_label">Rate us on Request provided<td>:</td></td>
                    <td>  <div class="rate">
                            <input onclick="sendInput(5)" type="radio" id="star5" name="rate" value="5" />
                            <label for="star5" title="text">5 stars</label>
                            <input type="radio" id="star4" name="rate" value="4" />
                            <label for="star4" title="text">4 stars</label>
                            <input type="radio" id="star3" name="rate" value="3" />
                            <label for="star3" title="text">3 stars</label>
                            <input type="radio" id="star2" name="rate" value="2" />
                            <label for="star2" title="text">2 stars</label>
                            <input type="radio" id="star1" name="rate" value="1" />
                            <label for="star1" title="text">1 star</label>
                          </div>
                    </td>
                </tr>
                <tr>
                    <td id="col_label">Rate us on L&D provided<td>:</td></td>
                    <td>  <div class="rate1">
                            <input type="radio" id="star51" name="rate1" value="5" />
                            <label for="star51" title="text">5 stars</label>
                            <input type="radio" id="star41" name="rate1" value="4" />
                            <label for="star41" title="text">4 stars</label>
                            <input type="radio" id="star31" name="rate1" value="3" />
                            <label for="star31" title="text">3 stars</label>
                            <input type="radio" id="star21" name="rate1" value="2" />
                            <label for="star21" title="text">2 stars</label>
                            <input type="radio" id="star11" name="rate1" value="1" />
                            <label for="star11" title="text">1 star</label>
                          </div>
                    </td>
                </tr>
                </tbody>
            </table>
                `;
                document.getElementById("EntryForm").innerHTML =tbl1;
                }
                document.querySelector('.area_of_support').textContent = output;
            }
            function getClientName() {
                output = document.getElementById("ClientName").value
                client = document.getElementById("ClientName").value
                if(client=="Other"){
                document.getElementById("clnt").innerHTML =`<input onchange="getClientName()" type="text" id="ClientName" name="ClientName" placeholder="Enter Client Name">`;
                }
                //document.querySelector('.client_name').textContent = output;
                document.getElementById('client_name_alert').textContent = "";
            }
            function getQEDeliveryLead() {
                output = document.getElementById("QEDeliveryLead").value
                //document.querySelector('.qe_delivery_lead').textContent = output;
                document.getElementById('qe_delivery_lead_alert').textContent = "";
            }
            function getChooseRequestType() {
                output = document.getElementById("ChooseRequestType").value
                //document.querySelector('.choose_request_type').textContent = output;
                document.getElementById('request_type_alert').textContent = "";
            }
            function getRequestorName() {
                requestor_name = document.getElementById("RequestorName").value
                if(requestor_name==""){
                document.getElementById('requestor_name_alert').textContent = "*Please Enter Requestor Name";
                }
                else{
                document.getElementById('requestor_name_alert').textContent = "";
                }
            }
            function getRequestDescription() {
                request_description = document.getElementById("RequestDescription").value
                if(request_description==""){
                document.getElementById('request_description_alert').textContent = "*Please Enter Request Description";
                }
                else{
                document.getElementById('request_description_alert').textContent = "";
                }
            }
            function getAreastoImprove() {
                areas_to_improve =document.getElementById("AreastoImprove").value;
                if(areas_to_improve==""){
                document.getElementById('areas_to_improve_alert').textContent = "*Please Enter Areas to Improve";
                }
                else{
                document.getElementById('areas_to_improve_alert').textContent = "";
                }
            }
            function getLeaveType() {
                output = document.getElementById("LeaveType").value
                //document.querySelector('.leave_type').textContent = output;
                document.getElementById('leave_type_alert').textContent = "";
            }
            function getDateDiff(){
                date1 = document.getElementById("StartDate").value
                date2 = document.getElementById("EndDate").value
                var d1 = new Date(date1);
                var d2 = new Date(date2);
                var diff = d2.getTime() - d1.getTime();
                var daydiff = diff / (1000 * 60 * 60 * 24);
                document.getElementById('total_working_days').textContent = daydiff;
            }
            function getChooseTracker() {
                selectElement =document.getElementById("ChooseTracker");
                Tracker =
                    selectElement.options
                    [selectElement.selectedIndex].textContent;
                //output = document.getElementById("ChooseTracker").value
                //document.querySelector('.choose_tracker').textContent = output;
                //Tracker = document.getElementById("ChooseTracker").value
                if(Tracker=="Weekly RAG Status"){
                tbl=`<table>
                    <tbody>
                        <tr><td id="col_label">Practice Lead<span>*</span><td>:</td></td><td class="practice_lead"><span id="mand_fields">-- Select --</span></td></tr>
                        <tr><td id="col_label">Resource Name<span>*</span><td>:</td></td><td class="resource_name"><span id="mand_fields">-- Select --</span></td></tr>
                        <tr><td id="col_label">Project Name<span>*</span><td>:</td></td><td class="project_name"><span id="mand_fields">-- Select --</span></td></tr>
                    </tbody>
                  </table>`;
                document.getElementById("AppliedFilters").innerHTML =tbl;
                tbl1=`
                              <table>
                <tbody>
                <tr>
                    <td id="col_label">RAG Status<span>*</span><td>:</td></td>
                    <td>
                        <select onchange="getRAGStatus()" name="RAGStatus" id="RAGStatus">
                        {% for rag in rags %}
                        <option  value={{rag}}>{{rag}}</option>
                        {% endfor %}
                        </select>
                    </td>
                </tr>
                <tr><td id="rag_alert"></td</tr>
                <tr>
                    <td id="col_label">Testing Type<span>*</span><td>:</td></td>
                    <td>
                        <select onchange="getTestingType()" name="TestingType" id="TestingType">
                        {% for test_type in test_types %}
                        <option  value={{test_type}}>{{test_type}}</option>
                        {% endfor %}
                        </select>
                    </td>
                </tr>
                <tr><td id="test_type_alert"></td></tr>
                <tr>
                    <td id="col_label">Weekly Deliverable<span>*</span><td>:</td></td>
                    <td><textarea id="WeeklyDeliverable" onchange="getWeeklyDeliverable()" placeholder="Enter Weekly Deliverable"></textarea></td>
                </tr>
                <tr><td id="weekly_deliverables_alert"></td></tr>
                <tr>
                    <td id="col_label">Sub-Tasks<td>:</td></td>
                    <td><textarea id="SubTasks" placeholder="Enter Sub Tasks"></textarea></td>
                </tr>
                <tr>
                    <td id="col_label">Impediments<td>:</td></td>
                    <td><textarea id="Impediments" placeholder="Enter Impediments"></textarea></td>
                </tr>
                <tr>
                    <td id="col_label">Action-items<td>:</td></td>
                    <td><textarea id="ActionItems" placeholder="Enter Action Items"></textarea></td>
                </tr>
                <tr>
                    <td id="col_label">Comments<td>:</td></td>
                    <td><textarea id="Comments" placeholder="Enter Comments"></textarea></td>
                </tr>
                <tr>
                    <td id="col_label">Upcoming Leaves<td>:</td></td>
                    <td><input type="date" id="StartDate" name="From Date" placeholder="From Date" min="2015-01-01" max="2030-12-31" /> to <input type="date" id="EndDate" name="To Date"  placeholder="From Date" min="2015-01-01" max="2030-12-31" /></td>
                </tr>
                </tbody>
            </table>
                `;
                document.getElementById("EntryForm").innerHTML =tbl1;
                tbl2=`<table>
                  <tbody>
                  <tr>
                      <td id="col_label">Practice Lead<td>:</td></td>
                      <td>
                            <select onchange="getPracticeLead()" name="PracticeLead" id="PracticeLead">
                            {% for lead in leads %}
                            <option  value={{lead}}>{{lead}}</option>
                            {% endfor %}
                            </select>
                      </td>
                  </tr>
                  <tr>
                      <td id="col_label">Resource Name<td>:</td></td>
                      <td>
                          <select onchange="getResourceName()" name="ResourceName" id="ResourceName">
                              <option  value="-- Select --">-- Select --</option>
                          </select>
                      </td>
                  </tr>
                  <tr>
                      <td id="col_label">Project Name<td>:</td></td>
                      <td>
                          <select onchange="getProjectName()" name="ProjectName" id="ProjectName">
                            {% for project in projects %}
                            <option  value={{project}}>{{project}}</option>
                            {% endfor %}
                          </select>
                      </td>
                  </tr>
                  </tbody>
              </table>`;
                document.getElementById("ApplyFilters").innerHTML =tbl2;
                }
                else if(Tracker=="Skill Tracker"){
                tbl=`<table>
                    <tbody>
                        <tr><td id="col_label">Employee ID<span>*</span><td>:</td></td><td class="dynamic_filter_3"><span id="mand_fields">-- Select --</span></td></tr>
                        <tr><td id="col_label">Skills<span>*</span><td>:</td></td><td class="dynamic_filter_4"><span id="mand_fields">-- Select --</span></td></tr>
                    </tbody>
                  </table>`;
                Tracker = document.getElementById("AppliedFilters").innerHTML =tbl;
                tbl1=`
                          <table>
                <tbody>
                <tr>
                    <td id="col_label">Expertise Level<span>*</span><td>:</td></td>
                    <td>
                        <select onchange="getExpertiseLevel()" name="ExpertiseLevel" id="ExpertiseLevel">
                        {% for expertice_level in expertice_levels %}
                        <option  value={{expertice_level}}>{{expertice_level}}</option>
                        {% endfor %}
                        </select>
                    </td>
                </tr>
                <tr><td id="expertise_level_alert"></td></tr>
                <tr>
                    <td id="col_label">Interest for Up-Skilling<td>:</td></td>
                    <td>
                        <select onchange="getIntUpSkill()" name="IntUpSkill" id="IntUpSkill">
                        {% for up_skilling in up_skillings %}
                        <option  value={{up_skilling}}>{{up_skilling}}</option>
                        {% endfor %}
                        </select>
                    </td>
                </tr>
                <tr><td></td></tr>
                </tbody>
            </table>
                `;
                document.getElementById("EntryForm").innerHTML =tbl1;
                tbl2=`
                <table>
                  <tbody>
                  <tr>
                      <td id="col_label">Employee ID<td>:</td></td>
                      <td>
                          <select onchange="getDynamicFilter3()" name="DynamicFilter3" id="DynamicFilter3">
                            {% for emp_id in emp_ids %}
                            <option  value={{emp_id}}>{{emp_id}}</option>
                            {% endfor %}
                          </select>
                      </td>
                  </tr>
                   <tr>
                      <td id="col_label">Skills<td>:</td></td>
                      <td id="skl">
                          <select onchange="getDynamicFilter4()" name="DynamicFilter4" id="DynamicFilter4">
                            {% for skill in skills %}
                            <option  value={{skill}}>{{skill}}</option>
                            {% endfor %}
                          </select>
                      </td>
                  </tr>
                  </tbody>
              </table>
                `;
                document.getElementById("ApplyFilters").innerHTML =tbl2;
                }
                else if(Tracker=="Action Items for Practice - Request"){
                tbl=`<table>
                    <tbody>
                        <tr><td id="col_label">Area of Support<span>*</span><td>:</td></td><td  class="area_of_support"><span id="mand_fields">-- Select --</span></td></tr>
                    </tbody>
                  </table>`;
                  document.getElementById("AppliedFilters").innerHTML =tbl;
                tbl2=`
                <table>
                  <tbody>
                  <tr>
                      <td id="col_label">Area of Support<td>:</td></td>
                      <td>
                          <select onchange="getAreaofSupport()" name="AreaofSupport" id="AreaofSupport">
                            {% for area_of_support_r in area_of_supports_Request %}
                            <option  value={{area_of_support_r}}>{{area_of_support_r}}</option>
                            {% endfor %}
                          </select>
                      </td>
                  </tr>
                  </tbody>
              </table>
                `;
                document.getElementById("ApplyFilters").innerHTML =tbl2;
                getAreaofSupport("First");
                }
                    else if(Tracker=="Action Items for Practice - Feedback"){
                        tbl=`<table>
                            <tbody>
                                <tr><td id="col_label">Area of Support<span>*</span><td>:</td></td><td  class="area_of_support"><span id="mand_fields">-- Select --</span></td></tr>
                            </tbody>
                          </table>`;
                          document.getElementById("AppliedFilters").innerHTML =tbl;
                        tbl2=`
                        <table>
                          <tbody>
                          <tr>
                              <td id="col_label">Area of Support<td>:</td></td>
                              <td>
                                  <select onchange="getAreaofSupport()" name="AreaofSupport" id="AreaofSupport">
                                    {% for area_of_support_fb in area_of_supports_Feedback %}
                                    <option  value={{area_of_support_fb}}>{{area_of_support_fb}}</option>
                                    {% endfor %}
                                  </select>
                              </td>
                          </tr>
                          </tbody>
                      </table>
                        `;
                        document.getElementById("ApplyFilters").innerHTML =tbl2;
                        getAreaofSupport("First");
                        }
                else{
                tbl=`<table>
                    <tbody>
                        <tr><td id="col_label">Practice Lead<span>*</span><td>:</td></td><td  class="practice_lead"><span id="mand_fields">-- Select --</span></td></tr>
                        <tr><td id="col_label">Resource Name<span>*</span><td>:</td></td><td class="resource_name"><span id="mand_fields">-- Select --</span></td></tr>
                    </tbody>
                  </table>`;
                document.getElementById("AppliedFilters").innerHTML =tbl;
                tbl1=`
                              <table>
                <tbody>
                <tr>
                    <td id="col_label">Leave Type<span>*</span><td>:</td></td>
                    <td>
                        <select onchange="getLeaveType()" name="LeaveType" id="LeaveType">
                        {% for leave_type in leave_types %}
                        <option  value={{leave_type}}>{{leave_type}}</option>
                        {% endfor %}
                        </select>
                    </td>
                </tr>
                <tr><td id="leave_type_alert"></td></tr>
                <tr>
                    <td id="col_label">Start Date<td>:</td></td>
                    <td><input type="date" id="StartDate" onchange="getDateDiff()" name="trip-start" value="2024-05-22" min="2018-01-01" max="2025-12-31" /></td>
                </tr>
                <tr>
                    <td id="col_label">End Date<td>:</td></td>
                    <td><input type="date" id="EndDate" onchange="getDateDiff()" name="trip-end" value="2024-05-22" min="2018-01-01" max="2025-12-31" /></td>
                </tr>
                <tr>
                    <td id="col_label">Total Working Days<td>:</td></td>
                    <td id="total_working_days">0</td>
                </tr>
                </tbody>
            </table>
                `;
                document.getElementById("EntryForm").innerHTML =tbl1;
                getDateDiff();
                tbl2=`<table>
                  <tbody>
                  <tr>
                      <td id="col_label">Practice Lead<td>:</td></td>
                      <td>
                            <select onchange="getPracticeLead()" name="PracticeLead" id="PracticeLead">
                            {% for lead in leads %}
                            <option  value={{lead}}>{{lead}}</option>
                            {% endfor %}
                            </select>
                      </td>
                  </tr>
                  <tr>
                      <td id="col_label">Resource Name<td>:</td></td>
                      <td>
                          <select onchange="getResourceName()" name="ResourceName" id="ResourceName">
                              <option  value="-- Select --">-- Select --</option>
                          </select>
                      </td>
                  </tr>
                  </tbody>
              </table>`;
                document.getElementById("ApplyFilters").innerHTML =tbl2;
                }
            }
            getChooseTracker();
            function AlertFunc() {
                document.getElementById('alert').textContent = "Please Fill the Mandatory Fields(*)";
                setTimeout(function () {
                    document.getElementById('alert').textContent = "";
                }, 5000);
                //$('#GFG').text("Div hides after 1 second.");
            }
            function PopupFunction(Tracker) {
              var popup = document.getElementById("myPopup");
              popup.textContent = `${Tracker} Form Submitted Successfully`;
                popup.classList.add('custom-background');
              //popup.classList.toggle("show");
              setTimeout(function () {
                    popup.textContent = "";
                  popup.classList.remove('custom-background');
                }, 5000);
            }
            function sendInput() {
                selectElement =document.getElementById("ChooseTracker");
                Tracker =selectElement.options[selectElement.selectedIndex].textContent;
                if(Tracker=="Weekly RAG Status"){
                 selectElement =document.getElementById("PracticeLead");
                 practice_lead =selectElement.options[selectElement.selectedIndex].textContent;
                 selectElement =document.getElementById("ResourceName");
                 resource_name =selectElement.options[selectElement.selectedIndex].textContent;
                 selectElement =document.getElementById("ProjectName");
                 project_name =selectElement.options[selectElement.selectedIndex].textContent;
                 selectElement =document.getElementById("RAGStatus");
                 rags =selectElement.options[selectElement.selectedIndex].textContent;
                 selectElement =document.getElementById("TestingType");
                 test_type =selectElement.options[selectElement.selectedIndex].textContent;
                 weekly_deliverable = document.getElementById("WeeklyDeliverable").value;
                 flag=true;
                 console.log("Result",rags,"Result1",test_type);
                 if(practice_lead=="-- Select --"){
                  flag=false;
                 }
                 if(resource_name=="-- Select --"){
                  flag=false;
                 }
                 if(project_name=="-- Select --"){
                  flag=false;
                 }
                 if(rags=="-- Select --"){
                  flag=false;
                  document.getElementById('rag_alert').textContent = "*Please Select RAG Status";
                 }
                 if(test_type=="-- Select --"){
                  flag=false;
                  document.getElementById('test_type_alert').textContent = "*Please Select Testing Type";
                 }
                 if(weekly_deliverable==""){
                  flag=false;
                  document.getElementById('weekly_deliverables_alert').textContent = "*Please Enter Weekly Deliverables";
                 }
                 if(flag){
                  sub_tasks = document.getElementById("SubTasks").value
                  impediments = document.getElementById("Impediments").value
                  action_items = document.getElementById("ActionItems").value
                  comments = document.getElementById("Comments").value
                  start_date = document.getElementById("StartDate").value
                  end_date = document.getElementById("EndDate").value
                  fetch("https://37727f4f-9aca-4f3e-a138-f54e7c36574d-00-27qjdf76eegx8.sisko.replit.dev/gip", {
                  method: "POST",
                  body: JSON.stringify({
                  "Practice_Lead":practice_lead,
                  "Resource_Name":resource_name,
                  "Project_Name":project_name,
                  "RAG_Status": rags,
                  "Test_Type": test_type,
                  "Weekly_Deliverable": weekly_deliverable,
                  "Sub_Tasks":sub_tasks,
                  "Impediments":impediments,
                  "Action_Items":action_items,
                  "Comments":comments,
                  "Start_Date":start_date,
                  "End_Date":end_date
                  }),
                  headers: {
                   "Content-type": "application/json; charset=UTF-8"
                  }
                  })
                  .then((response) => response.json())
                  .then((json) => console.log(json));

                  PopupFunction(Tracker);
                     selectElement.value=Tracker;
                       getChooseTracker();
                 }
                 else{
                 AlertFunc();
                 }
                }
                else if (Tracker=="Skill Tracker"){
                 selectElement =document.getElementById("DynamicFilter3");
                 emp_id =selectElement.options[selectElement.selectedIndex].textContent;
                 selectElement =document.getElementById("DynamicFilter4");
                 skill =selectElement.options[selectElement.selectedIndex].textContent;
                 selectElement =document.getElementById("ExpertiseLevel");
                 expertise_level =selectElement.options[selectElement.selectedIndex].textContent;
                 selectElement =document.getElementById("IntUpSkill");
                 int_up_skill =selectElement.options[selectElement.selectedIndex].textContent;
                 flag=true;
                 if(emp_id=="-- Select --"){
                  flag=false;
                 }
                 if(skill=="-- Select --"){
                  flag=false;
                 }
                 if(expertise_level=="-- Select --"){
                  flag=false;
                  document.getElementById('expertise_level_alert').textContent = "*Please Select Expertise Level";
                 }
                 if(flag){
                  fetch("https://37727f4f-9aca-4f3e-a138-f54e7c36574d-00-27qjdf76eegx8.sisko.replit.dev/gip", {
                  method: "POST",
                  body: JSON.stringify({
                  "Employee_ID":emp_id,
                  "Skill":skill,
                  "Expertise_Level":expertise_level,
                  "Interest_for_Up_Skill": int_up_skill
                  }),
                  headers: {
                   "Content-type": "application/json; charset=UTF-8"
                  }
                  })
                  .then((response) => response.json())
                  .then((json) => console.log(json));

                  PopupFunction(Tracker);
                     selectElement.value=Tracker;
                       getChooseTracker();
                 }
                 else{
                 AlertFunc();
                 }
                }
                else if (Tracker=="Action Items for Practice - Request" || Tracker=="Action Items for Practice - Feedback"){
                 selectElement =document.getElementById("AreaofSupport");
                 area_of_support =selectElement.options[selectElement.selectedIndex].textContent;
                 flag=true;
                 if(area_of_support=="Request"){
                 selectElement =document.getElementById("ChooseRequestType");
                 request_type =selectElement.options[selectElement.selectedIndex].textContent;
                 selectElement =document.getElementById("ClientName");
                 client_name =selectElement.options[selectElement.selectedIndex].textContent;
                 selectElement =document.getElementById("QEDeliveryLead");
                 qe_delivery_lead =selectElement.options[selectElement.selectedIndex].textContent;
                 requestor_name = document.getElementById("RequestorName").value
                 request_description = document.getElementById("RequestDescription").value
                 if(request_type=="--Select--"){
                  flag=false;
                  document.getElementById('request_type_alert').textContent = "*Please Select Request Type";
                 }
                 if(client_name=="-- Select --"){
                  flag=false;
                  document.getElementById('client_name_alert').textContent = "*Please Select Client Name";
                 }
                 if(qe_delivery_lead=="-- Select --"){
                  flag=false;
                  document.getElementById('qe_delivery_lead_alert').textContent = "*Please Select QE Delivery Lead";
                 }
                 if(requestor_name==""){
                  flag=false;
                  document.getElementById('requestor_name_alert').textContent = "*Please Enter Requestor Name";
                 }
                 if(request_description==""){
                  flag=false;
                  document.getElementById('request_description_alert').textContent = "*Please Enter Request Description";
                 }
                 if(flag){
                  fetch("https://37727f4f-9aca-4f3e-a138-f54e7c36574d-00-27qjdf76eegx8.sisko.replit.dev/gip", {
                  method: "POST",
                  body: JSON.stringify({
                  "Area_of_Support":area_of_support,
                  "Request_Type":request_type,
                  "Client_Name":client_name,
                  "QE_Delivery_Lead":qe_delivery_lead,
                  "Requestor_Name":requestor_name,
                  "Request_Description":request_description
                  }),
                  headers: {
                   "Content-type": "application/json; charset=UTF-8"
                  }
                  })
                  .then((response) => response.json())
                  .then((json) => console.log(json));

                  PopupFunction(Tracker);
                     selectElement.value=Tracker;
                       getChooseTracker();
                 }
                 else{
                 AlertFunc();
                 }
                 }
                 else{
                 areas_to_improve =document.getElementById("AreastoImprove").value;
                 request_rating = "";
                 lnd_rating = "";
                 var ele = document.getElementsByName('rate');
                 for (i = 0; i < ele.length; i++) {
                    if (ele[i].checked)
                        request_rating=ele[i].value;
                 }
                 var ele = document.getElementsByName('rate1');
                 for (i = 0; i < ele.length; i++) {
                    if (ele[i].checked)
                        lnd_rating=ele[i].value;
                 }
                 if(areas_to_improve==""){
                  flag=false;
                  document.getElementById('areas_to_improve_alert').textContent = "*Please Enter Areas to Improve";
                 }
                 if(flag){
                  fetch("https://37727f4f-9aca-4f3e-a138-f54e7c36574d-00-27qjdf76eegx8.sisko.replit.dev/gip", {
                  method: "POST",
                  body: JSON.stringify({
                  "Area_of_Support":area_of_support,
                  "Areas_to_Improve":areas_to_improve,
                  "Request_Rating":request_rating,
                  "L_and_D_Rating":lnd_rating
                  }),
                  headers: {
                   "Content-type": "application/json; charset=UTF-8"
                  }
                  })
                  .then((response) => response.json())
                  .then((json) => console.log(json));

                  PopupFunction(Tracker);
                     selectElement.value=Tracker;
                       getChooseTracker();
                 }
                 else{
                 AlertFunc();
                 }
                 }
                }
                else{
                 selectElement =document.getElementById("PracticeLead");
                 practice_lead =selectElement.options[selectElement.selectedIndex].textContent;
                 selectElement =document.getElementById("ResourceName");
                 resource_name =selectElement.options[selectElement.selectedIndex].textContent;
                 selectElement =document.getElementById("LeaveType");
                 leave_type =selectElement.options[selectElement.selectedIndex].textContent;
                 flag=true;
                 if(practice_lead=="-- Select --"){
                  flag=false;
                 }
                 if(resource_name=="-- Select --"){
                  flag=false;
                 }
                 if(leave_type=="-- Select --"){
                  flag=false;
                  document.getElementById('leave_type_alert').textContent = "*Please Select Leave Type";
                 }
                 if(flag){
                  fetch("https://37727f4f-9aca-4f3e-a138-f54e7c36574d-00-27qjdf76eegx8.sisko.replit.dev/gip", {
                  method: "POST",
                  body: JSON.stringify({
                  "Practice_Lead":practice_lead,
                  "Resource_Name":resource_name,
                  "Leave_Type":leave_type
                  }),
                  headers: {
                   "Content-type": "application/json; charset=UTF-8"
                  }
                  })
                  .then((response) => response.json())
                  .then((json) => console.log(json));

                  PopupFunction(Tracker);
                  selectElement.value=Tracker;
                  getChooseTracker();
                 }
                 else{
                 AlertFunc();
                 }
                }
                /*        output1 = document.getElementsByClassName("rate").value
                        output2 = document.getElementsByClassName("rate1").value*/
            }
</script>
{% endblock %}
